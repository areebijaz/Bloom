

<div class="container">
  <div class="flex-container-between">
    <div class="product-bio">
      <h1><%= @product.title %> </h1>
      <h2> <%= @product.brand.name %> </h2>
      <p> <%= @product.description %> </p>
      <div class="ratings-flex">
        <div class="rating">
          <p>safety rating: <%= @product.safety_rating %></p>
          <!-- calling instance method from Ingredient model, look inside model-->
        </div>
        <div class="rating">
          <p>efficacy rating: <%= @product.efficacy_rating %></p>
          <!-- calling instance method from Ingredient model-->
        </div>
      </div>
    </div>
    <div class="product-bio-image">
      <img src= "<%=@product.img %>" style="width: 300px" />
      <p>Need to add average user ratings here</p>
      <p>User Consensus: 4.3 /5</p>
    </div>
  </div>
</div>

<div class="salmon-container">
  <div class="container">
    <div class="container-aligned-left">
      <h2>What's In It?</h2>
      <p>Filter by: <strong>safety</strong></p>
      <hr>
      <h3>Trusted Ingredients (95%+ Ratings)</h3>
        <div class="container">
          <% @product_ingredients.each do |product_ingredient| %>
            <div class="ingredient-index-card">
              <%= image_tag  "https://res.cloudinary.com/dv27nsze8/image/upload/v1607129840/bloom_imagery/frank-dudek-Tg8HCInX4gY-unsplash_e29ujo.jpg" %>
              <h3> <%= product_ingredient.ingredient.name %> </h3>
              <div class="ingredients-card-rating">
                <div class="card-rating-container">
                  <h3>[actual Safety rating here]</h3>
                  <h3>Safety rating</h3>                
                </div>
                <div class="card-rating-container">
                  <h3>[actual Safety rating here]</h3>
                  <h3>Safety rating</h3>                
                </div>
              </div>
            </div>
          <% end %>
        </div>
      <hr>
      <h3>Other Ingredients</h3>
      <p>Lorem ipsum...</p>
    </div>
  </div>
</div>

<div class="container" style="padding-top: 20px; padding-bottom: 40px">
  <div class="container-aligned-left">
    <h2>How the Users Feel</h2>
    <hr>
    <div class="product-rating-flex">
      <div class="product-ratings-left">
        <h3>Ratings Overview</h3>
        <p>Select ro filter results</p>
        <ul>
          <li>5 stars here</li>
          <li>4 stars here</li>
          <li>3 stars here</li>
          <li>2 stars here</li>
          <li>1 stars here</li>
          <li>0 stars here</li>
        </ul>
      </div>
      <div class="product-ratings-right">
        <h2>Overall Consensus: 4.3/5</h2>
        <h3>Stars in here</h3>
        <%= link_to "Leave a review", products_path, class: "btn-ghost" %>
      </div>
    </div>
    <div class="ind-product-reviews">
      <h2>User Reviews</h2>
      <hr>
      <% @product.product_reviews.each do |product_review| %>
      <div class="product-review-card">
        <div class="avatar-placeholder">
          <div style="border-radius: 50%">
            <%= image_tag "https://res.cloudinary.com/dv27nsze8/image/upload/v1607162657/bloom_imagery/zach-vessels-WxRd7byFxs4-unsplash_cxhdbu.jpg" %>
          </div>
        </div>
        <div class="review-body">
          <div class="product-review-header">
            <h3><%= product_review.title %></h3>
            <p style="color: $mid-gray; margin-left: 7px">-5 days ago</p>
          </div>
          <p><%= product_review.content %></p>
          <p><b>Skin type:</b>
          <p><b>Skin concern:</b> <%= product_review.skin_concern %></p>
          <div class="reviews-and-ratings">
            <p>Rating: <%= product_review.product_rating %></p>
            <p style="margin-left: 10px"><b>Recommended?</b> <%= product_review.recommended %></p>
          </div>
          <hr>
        </div> 
      </div>
      <% end %>
    </div>
  </div>
</div>


<% if current_user %>
  <div class="container">
    <%= render partial: 'product_reviews/form' %>
  </div>
<% end %>

